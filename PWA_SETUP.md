# PWA Setup for Foxon

## Overview

Foxon has been configured as a Progressive Web App (PWA) with full Add to Home Screen (A2HS) support across iOS, Android, and desktop browsers.

## What's Been Implemented

### âœ… Core PWA Features
- **Web App Manifest** (`/public/manifest.json`) - Defines app identity and behavior
- **Service Worker** - Automatically generated by next-pwa for offline functionality
- **iOS Support** - Complete Apple-specific meta tags and icon support
- **Installability** - Meets all PWA criteria for A2HS prompts
- **Offline Caching** - Strategic caching for fonts, images, and app shell

### âœ… Files Created/Modified

1. **`/public/manifest.json`** - PWA manifest with app metadata
2. **`/next.config.ts`** - Next.js PWA configuration with caching strategies
3. **`/src/app/layout.tsx`** - Enhanced metadata with PWA and iOS support
4. **`/public/icons/`** - Directory prepared for PWA icons
5. **`.gitignore`** - Added PWA-generated files to ignore list

### âœ… Key Features Enabled

- **Standalone App Mode** - Launches without browser UI
- **Theme Integration** - Uses app's color scheme (`#1f2937`)
- **Offline Functionality** - Core app works without internet
- **App Shortcuts** - Quick actions from home screen
- **Cross-Platform** - Works on iOS, Android, Desktop Chrome/Edge

## Required Next Steps

### ðŸš¨ Critical: Generate Real Icons

The icons directory contains placeholder files. You MUST generate actual icons before production:

```bash
# Navigate to /public/icons/ and replace placeholders with real PNG files:

# Standard PWA Icons
icon-72x72.png
icon-96x96.png  
icon-128x128.png
icon-144x144.png
icon-152x152.png
icon-192x192.png
icon-384x384.png
icon-512x512.png

# Maskable Icons (Android Adaptive)
icon-192x192-maskable.png
icon-512x512-maskable.png

# iOS-Specific Icons
apple-touch-icon-120x120.png
apple-touch-icon-152x152.png
apple-touch-icon-180x180.png

# Shortcut Icons
shortcut-workout.png (96x96)
shortcut-profile.png (96x96)

# Apple Launch Images
apple-touch-startup-image-768x1004.png
apple-touch-startup-image-1536x2008.png

# Safari Pinned Tab
safari-pinned-tab.svg

# Replace /public/favicon.ico with proper multi-resolution favicon
```

**Recommended Tools:**
- [PWA Asset Generator](https://www.pwabuilder.com/imageGenerator)
- [Real Favicon Generator](https://realfavicongenerator.net/)

## Testing A2HS Functionality

### iOS Safari (iPhone/iPad)
1. Open app in Safari
2. Tap Share button
3. Look for "Add to Home Screen" option
4. App should install with custom icon and name

### Android Chrome
1. Open app in Chrome
2. Look for install prompt banner
3. Or use Chrome menu â†’ "Add to Home Screen"
4. App installs with adaptive icon support

### Desktop Chrome/Edge
1. Open app in browser
2. Look for install icon in address bar
3. Or use browser menu â†’ "Install Foxon"
4. Creates desktop app shortcut

## PWA Configuration Details

### Caching Strategy
- **Static Assets**: Cached with StaleWhileRevalidate
- **Google Fonts**: Long-term cache (365 days)
- **Next.js Data**: 24-hour cache with network-first
- **API Routes**: Not cached (real-time data)
- **Images**: 30-day cache with background updates

### Offline Behavior
- App shell loads instantly when offline
- Cached workout data remains accessible
- New data syncs when connection returns
- Service worker updates automatically

### Install Criteria Met
- âœ… HTTPS (required for production)
- âœ… Web App Manifest with required fields
- âœ… Service Worker registered
- âœ… Icons in multiple sizes
- âœ… Start URL responds with 200
- âœ… Display mode: standalone

## Production Deployment

1. **Generate real icons** (replace placeholders)
2. **Build and deploy** - Service worker generates automatically
3. **Test on HTTPS** - PWA features require secure context
4. **Verify manifest** - Check browser dev tools â†’ Application tab

## Development Notes

- Service worker disabled in development mode
- Icons are currently placeholders
- PWA features only work over HTTPS in production
- Test thoroughly on actual devices before launch

## Troubleshooting

### A2HS Not Showing
- Ensure all required icons exist
- Check manifest.json is accessible
- Verify HTTPS in production
- Clear browser cache and test again

### Icons Not Loading  
- Verify icon files exist in `/public/icons/`
- Check file names match manifest exactly
- Ensure proper PNG format and sizes

### Service Worker Issues
- Check browser console for errors
- Verify next-pwa package installed correctly
- Clear all site data and reload

## Success Metrics

When properly implemented, users should be able to:
- Install Foxon like a native app
- Use core features offline
- Launch from home screen without browser
- Experience fast loading with caching
- Access app shortcuts on supported platforms